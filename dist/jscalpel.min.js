!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.jscalpel=e()}(this,function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),r=Object.prototype.toString,o=function(t){return"[object Object]"===r.call(t)},u=function(){function u(e){var n=e.target,r=e.returnedValue,o=e.error;t(this,u),this._target=n,this._error=o,this._returnedValue=r}return n(u,[{key:"_getValueByPath",value:function(t){for(var n=null,r=this._target,o=this._fallbackpath(t).split("."),u=0,a=o.length;u<a;u++)if(void 0===(void 0===(n=n?n[o[u]]:r[o[u]])?"undefined":e(n)))return n;return n}},{key:"_getValue",value:function(t){var e=null,n=[],o=this;return"string"==typeof t&&t.length>0?this._getValueByPath(t):"[object Array]"===r.call(t)?(t.forEach(function(t,r){"string"==typeof t&&(e=o._getValueByPath(t),n.push(e))}),0===n.length?null:n):null}},{key:"get",value:function(t){return t?this._getValueByPath(t):this._returnedValue}},{key:"_fallbackpath",value:function(t){return"string"!=typeof t?"":t}},{key:"_extend",value:function(t,e){if(o(t))for(var n=t,r=e.split("."),u=r.length,a=0;a<u;a++)void 0===n[r[a]]&&(n[r[a]]={}),n=(arguments.length<=2?0:arguments.length-2)>0&&a===u-1?n[r[a]]=arguments.length<=2?void 0:arguments[2]:n[r[a]]}},{key:"_setOrDel",value:function(t,e){var n=this._fallbackpath(t);""!==n?this._extend(this._target,n,e):"function"==typeof this._error&&this._error(this._target,t)}},{key:"set",value:function(t,e){var n=this;o(t)?Object.keys(t).forEach(function(e,r){n._setOrDel(e,t[e])}):this._setOrDel(t,e)}},{key:"has",value:function(t){return!!this._getValueByPath(t)}},{key:"del",value:function(t){var e=this;t&&(Array.isArray(t)?t.forEach(function(t,n){e._setOrDel(t,void 0)}):e._setOrDel(ph,void 0))}}]),u}();return function(t,e){var n=t.target,o=t.path,a=t.keys,i=t.prefix,l=t.callback,f=t.success,c=t.deep,s=t.plugins,y=t.error,p=f||l,h=!!i,g=function t(e){var n={},o=[];return"[object Object]"===r.call(e)?(Object.keys(e).forEach(function(u,a){Array.isArray(e[u])?(e[u].forEach(function(t,e){o.push(t)}),n[u]=o,o=[]):r.call("[object Object]"===e[u])&&(n[u]=t(e[u]))}),n):e},v=function(t){return i&&h?i+"."+t:""+t},d=function(t){for(var e=t.path,n=t.target,r=v(e).split("."),o=0,u=r.length;o<u;o++)if(void 0===(n=n[r[o]]))return n;return n},b=function(t){var e=t.plugins,n=t.name,r={value:t.value,name:n};e&&Array.isArray(e)&&e.length&&e.forEach(function(t,e){t(r)})},_=null,m=function(t){var e=null;try{if(e="string"==typeof t?JSON.parse(t):t,c&&(e=g(e)),"[object Object]"!==r.call(e)&&!Array.isArray(e))return void("function"==typeof y&&y(e))}catch(t){return void("function"==typeof y&&y(e,t))}return e}(n),k=[],j=p?function(t){var e=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,n=/=[^,]+/gm,r=/=>.*$/gm,o=p.toString().replace(e,"").replace(r,"").replace(n,""),u=o.slice(o.indexOf("(")+1,o.indexOf(")")).match(/([^\s,]+)/g);return null===u?[]:u}():[];return"string"==typeof(o="function"==typeof o?o(i):o||a)&&o.length>0?(_=d({path:o,target:n}),b({plugins:s,name:j[0],value:_}),p&&"function"==typeof p&&p.call(null,_,m,o,e)):"[object Array]"===r.call(o)&&(o.forEach(function(t,e){"string"==typeof t&&(_=d({path:t,target:n}),b({plugins:s,value:_,name:j[e]}),k.push(_)),_=null}),k.push(m,o,e),p&&"function"==typeof p&&p.apply(null,k)),"function"==typeof l||"function"==typeof f?function(t,e,n){return"undefined"!=typeof value?value:e||n}(0,_,k.slice(0,-3)):new u({target:m,error:y})}});
//# sourceMappingURL=jscalpel.min.js.map
